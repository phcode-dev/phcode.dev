{"version":3,"sources":["extensionsIntegrated/CustomSnippets/UIHelper.js"],"names":["define","require","exports","module","StringUtils","Global","Strings","showError","inputId","wrapperId","errorMessage","errorId","$inputField","$","$wrapper","find","remove","removeClass","$errorMessage","attr","addClass","text","append","setTimeout","fadeOut","this","one","showEmptySnippetMessage","$emptySnippet","$snippetsList","showSnippetsList","clearSnippetsList","$snippetsListWrapper","empty","showAddSnippetMenu","$addSnippetMenu","$snippetListMenu","$backToListMenuBtn","$addNewSnippetBtn","$filterSnippetsPanel","$toolbarTitle","html","CUSTOM_SNIPPETS_ADD_PANEL_TITLE","showSnippetListMenu","$editSnippetMenu","snippetCount","SnippetHintsList","length","countText","CUSTOM_SNIPPETS_PANEL_TITLE","val","showEditSnippetMenu","CUSTOM_SNIPPETS_EDIT_PANEL_TITLE","showDuplicateAbbreviationError","abbreviation","isEditForm","format","CUSTOM_SNIPPETS_DUPLICATE_ERROR","showSnippetsListHeader","$snippetsListHeader","hideSnippetsListHeader","initializeListViewToolbarTitle"],"mappings":"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","sourcesContent":["/*\n * GNU AGPL-3.0 License\n *\n * Copyright (c) 2021 - present core.ai . All rights reserved.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License\n * for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see https://opensource.org/licenses/AGPL-3.0.\n *\n */\n\n/* eslint-disable no-invalid-this */\ndefine(function (require, exports, module) {\n    const StringUtils = require(\"utils/StringUtils\");\n    const Global = require(\"./global\");\n    const Strings = require(\"strings\");\n\n    /**\n     * this is a generic function to show error messages for input fields\n     *\n     * @param {string} inputId - input field id\n     * @param {string} wrapperId - wrapper element id\n     * @param {string} errorMessage - error message to display\n     * @param {string} errorId - Unique ID for the error message element\n     */\n    function showError(inputId, wrapperId, errorMessage, errorId) {\n        // First, clear any existing error messages for this input field\n        const $inputField = $(`#${inputId}`);\n        const $wrapper = $(`#${wrapperId}`);\n\n        // Remove any existing error messages in this wrapper\n        $wrapper.find(\".error-message\").remove();\n\n        // Remove error styling from the input field\n        $inputField.removeClass(\"error-input\");\n\n        // Now show the new error message\n        const $errorMessage = $(\"<div>\").attr(\"id\", errorId).addClass(\"error-message\").text(errorMessage);\n\n        $wrapper.append($errorMessage);\n\n        // highlight the input field with error\n        $inputField.addClass(\"error-input\");\n\n        // to automatically remove it after 5 seconds\n        setTimeout(function () {\n            $(`#${errorId}`).fadeOut(function () {\n                $(this).remove();\n            });\n            $inputField.removeClass(\"error-input\");\n        }, 5000);\n\n        $inputField.one(\"input\", function () {\n            $(`#${errorId}`).remove();\n            $(this).removeClass(\"error-input\");\n        });\n    }\n\n    /**\n     * This function is called when there are no available snippets to display\n     * this is called inside the 'showSnippetsList' function inside the snippetsList.js file\n     * in that case we need to show the empty snippet message\n     */\n    function showEmptySnippetMessage() {\n        const $emptySnippet = $(\"#no-snippets-wrapper\");\n        const $snippetsList = $(\"#snippets-list-wrapper\");\n\n        $emptySnippet.removeClass(\"hidden\");\n        $snippetsList.addClass(\"hidden\");\n    }\n\n    /**\n     * This function is called when there are snippets to display.\n     * Note: this function just updates the hidden state from the wrapper divs\n     * so this just unhides the wrapper. it doesn't add the snippet items\n     * this is called inside the 'showSnippetsList' function inside the snippetsList.js file\n     */\n    function showSnippetsList() {\n        const $emptySnippet = $(\"#no-snippets-wrapper\");\n        const $snippetsList = $(\"#snippets-list-wrapper\");\n\n        $emptySnippet.addClass(\"hidden\");\n        $snippetsList.removeClass(\"hidden\");\n    }\n\n    /**\n     * This function clears all the existing items inside the snippets list wrapper\n     * this is called everytime users switches back to the snippets list view,\n     * because we rebuild the snippets list menu everytime\n     */\n    function clearSnippetsList() {\n        const $snippetsListWrapper = $(\"#snippets-list-wrapper\");\n        $snippetsListWrapper.empty();\n    }\n\n    /**\n     * This function is responsible to show the add snippet menu\n     * add snippet menu is the menu which allows users to create a new snippet\n     * this is called when user clicks on the plus button at the toolbar or the add new snippet button\n     */\n    function showAddSnippetMenu() {\n        const $addSnippetMenu = $(\"#custom-snippets-add-new\");\n        const $snippetListMenu = $(\"#custom-snippets-list\");\n        const $backToListMenuBtn = $(\"#back-to-list-menu-btn\");\n        const $addNewSnippetBtn = $(\"#add-new-snippet-btn\");\n        const $filterSnippetsPanel = $(\"#filter-snippets-panel\");\n        const $toolbarTitle = $(\".toolbar-title\");\n\n        $addSnippetMenu.removeClass(\"hidden\");\n        $snippetListMenu.addClass(\"hidden\");\n\n        $backToListMenuBtn.removeClass(\"hidden\");\n        $addNewSnippetBtn.addClass(\"hidden\");\n        $filterSnippetsPanel.addClass(\"hidden\");\n\n        $toolbarTitle.html(`${Strings.CUSTOM_SNIPPETS_ADD_PANEL_TITLE} <span id=\"snippets-count\" class=\"snippets-count\"></span>`);\n    }\n\n    /**\n     * This function is responsible to show the snippet list menu\n     * snippet list menu is the menu which shows the list of all the snippets\n     * this is called when user clicks on the back button from add snippet menu\n     */\n    function showSnippetListMenu() {\n        const $addSnippetMenu = $(\"#custom-snippets-add-new\");\n        const $editSnippetMenu = $(\"#custom-snippets-edit\");\n        const $snippetListMenu = $(\"#custom-snippets-list\");\n        const $backToListMenuBtn = $(\"#back-to-list-menu-btn\");\n        const $addNewSnippetBtn = $(\"#add-new-snippet-btn\");\n        const $filterSnippetsPanel = $(\"#filter-snippets-panel\");\n        const $toolbarTitle = $(\".toolbar-title\");\n\n        $addSnippetMenu.addClass(\"hidden\");\n        $editSnippetMenu.addClass(\"hidden\");\n        $snippetListMenu.removeClass(\"hidden\");\n\n        $backToListMenuBtn.addClass(\"hidden\");\n        $addNewSnippetBtn.removeClass(\"hidden\");\n        $filterSnippetsPanel.removeClass(\"hidden\");\n\n        // add the snippet count in the toolbar (the no. of snippets added)\n        const snippetCount = Global.SnippetHintsList.length;\n        const countText = snippetCount > 0 ? `(${snippetCount})` : \"\";\n        $toolbarTitle.html(\n            `${Strings.CUSTOM_SNIPPETS_PANEL_TITLE} <span id=\"snippets-count\" class=\"snippets-count\">${countText}</span>`\n        );\n\n        $(\"#filter-snippets-input\").val(\"\");\n    }\n\n    /**\n     * This function is responsible to show the edit snippet menu\n     * edit snippet menu is the menu which allows users to edit an existing snippet\n     */\n    function showEditSnippetMenu() {\n        const $editSnippetMenu = $(\"#custom-snippets-edit\");\n        const $snippetListMenu = $(\"#custom-snippets-list\");\n        const $backToListMenuBtn = $(\"#back-to-list-menu-btn\");\n        const $addNewSnippetBtn = $(\"#add-new-snippet-btn\");\n        const $filterSnippetsPanel = $(\"#filter-snippets-panel\");\n        const $toolbarTitle = $(\".toolbar-title\");\n\n        $editSnippetMenu.removeClass(\"hidden\");\n        $snippetListMenu.addClass(\"hidden\");\n\n        $backToListMenuBtn.removeClass(\"hidden\");\n        $addNewSnippetBtn.addClass(\"hidden\");\n        $filterSnippetsPanel.addClass(\"hidden\");\n\n        // Update toolbar title\n        $toolbarTitle.html(`${Strings.CUSTOM_SNIPPETS_EDIT_PANEL_TITLE} <span id=\"snippets-count\" class=\"snippets-count\"></span>`);\n    }\n\n    /**\n     * Shows an error message when a snippet with the same abbreviation already exists\n     * and user is trying to add a new one\n     * @param {string} abbreviation - The abbreviation that's duplicated\n     * @param {boolean} isEditForm - Whether this is for the edit form (optional, defaults to false)\n     */\n    function showDuplicateAbbreviationError(abbreviation, isEditForm = false) {\n        const inputId = isEditForm ? \"edit-abbr-box\" : \"abbr-box\";\n        const wrapperId = isEditForm ? \"edit-abbr-box-wrapper\" : \"abbr-box-wrapper\";\n        const errorId = isEditForm ? \"edit-abbreviation-duplicate-error\" : \"abbreviation-duplicate-error\";\n\n        showError(inputId, wrapperId, StringUtils.format(Strings.CUSTOM_SNIPPETS_DUPLICATE_ERROR, abbreviation), errorId);\n    }\n\n    /**\n     * Shows the snippets list header\n     * this is called when there are snippets to display\n     */\n    function showSnippetsListHeader() {\n        const $snippetsListHeader = $(\"#snippets-list-header\");\n        $snippetsListHeader.removeClass(\"hidden\");\n    }\n\n    /**\n     * Hides the snippets list header\n     * this is called when there are no snippets to display (either none exist or all filtered out)\n     */\n    function hideSnippetsListHeader() {\n        const $snippetsListHeader = $(\"#snippets-list-header\");\n        $snippetsListHeader.addClass(\"hidden\");\n    }\n\n    /**\n     * Initializes the toolbar title for the list view\n     * This is called when the panel is first opened to ensure the snippet count is displayed\n     */\n    function initializeListViewToolbarTitle() {\n        const $toolbarTitle = $(\".toolbar-title\");\n        const snippetCount = Global.SnippetHintsList.length;\n        const countText = snippetCount > 0 ? `(${snippetCount})` : \"\";\n        $toolbarTitle.html(\n            `${Strings.CUSTOM_SNIPPETS_PANEL_TITLE} <span id=\"snippets-count\" class=\"snippets-count\">${countText}</span>`\n        );\n    }\n\n    exports.showEmptySnippetMessage = showEmptySnippetMessage;\n    exports.showSnippetsList = showSnippetsList;\n    exports.clearSnippetsList = clearSnippetsList;\n    exports.showAddSnippetMenu = showAddSnippetMenu;\n    exports.showSnippetListMenu = showSnippetListMenu;\n    exports.showEditSnippetMenu = showEditSnippetMenu;\n    exports.showDuplicateAbbreviationError = showDuplicateAbbreviationError;\n    exports.showSnippetsListHeader = showSnippetsListHeader;\n    exports.hideSnippetsListHeader = hideSnippetsListHeader;\n    exports.initializeListViewToolbarTitle = initializeListViewToolbarTitle;\n    exports.showError = showError;\n});\n"],"file":"UIHelper.js"}