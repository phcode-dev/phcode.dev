{"version":3,"sources":["extensions/default/JavaScriptCodeHints/unittestsx.js"],"names":["define","require","exports","module","Commands","brackets","getModule","CommandManager","MainViewManager","DocumentManager","EditorManager","FileSystem","FileUtils","PreferencesManager","SpecRunnerUtils","JSCodeHints","Preferences","ScopeManager","HintUtils","HintUtils2","ParameterHintProvider","phProvider","JSParameterHintsProvider","extensionPath","getNativeModuleDirectoryPath","testPath","testHtmlPath","testDoc","testEditor","preTestText","register","FILE_OPEN","fileInfo","getDocumentForPath","fullPath","done","doc","_edit","ACTIVE_PANE","describe","fixPos","pos","sticky","expectHints","provider","key","undefined","expect","hasHints","toBe","getHints","expectNoHints","_indexOf","hintList","hint","index","counter","length","data","value","_waitForHints","hintObj","callback","complete","hasOwnProperty","hints","obj","waitsFor","runs","expectCloseHints","newPos","expectedValue","setCursorPos","shouldCloseHints","getSession","hintsAbsent","absentHints","toBeTruthy","forEach","absentHint","hintsPresent","expectedHints","expectedHint","not","hintsPresentOrdered","prevIndex","currIndex","toBeGreaterThan","hintsPresentExact","findHint","hintSelection","i","l","current","selectHint","insertHint","_waitForJump","jumpPromise","cursor","activeEditor","getActiveEditor","getCursorPos","editorJumped","expectedLocation","handleJumpToDefinition","newCursor","line","ch","file","document","name","expectNoParameterHint","requestStatus","request","_getParameterHint","fail","status","waitsForFail","expectParameterHintClosed","isHintDisplayed","expectParameterHint","expectedParams","expectedParameter","requestHints","expectHint","params","parameters","n","currentIndex","type","isOptional","toBeFalsy","result","waitsForDone","setupTest","path","primePump","createMockEditorForDocument","getText","_readyPromise","_maybeReset","tearDownTest","setText","_closeAll","ALL_PANES","destroyMockEditor","beforeFirst","_configureJSCodeHints","noReset","afterLast","beforeEach","afterEach","it","jsHintProvider","xit","start","end","toEqual","getRange","before","middle","replaceRange","getLine","endplus","cursor1","cursor2","testPos","func","param","variable","endPos","noHintsOnDot","get","set","testPosStart","testPosEnd","handleProjectOpen","preferences","getPreferences","resolve","err","readAsText","text","configObj","JSON","parse","e","console","log","error","getExcludedDirectories","getExcludedFiles","source","getMaxFileCount","getMaxFileSize","excludedDirs","excludedFiles","test","identifierList","invalidIdentifierList","element","maybeIdentifier","testFile","formatParameterHint"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2013 - present Adobe Systems Incorporated. All rights reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n *\n */\n\n/*jslint regexp: true */\n/*global describe, it, xit, expect, beforeEach, afterEach, waitsFor, runs, waitsForDone, waitsForFail, beforeFirst, afterLast */\n\ndefine(function (require, exports, module) {\n\n    var Commands             = brackets.getModule(\"command/Commands\"),\n        CommandManager       = brackets.getModule(\"command/CommandManager\"),\n        MainViewManager      = brackets.getModule(\"view/MainViewManager\"),\n        DocumentManager      = brackets.getModule(\"document/DocumentManager\"),\n        EditorManager        = brackets.getModule(\"editor/EditorManager\"),\n        FileSystem           = brackets.getModule(\"filesystem/FileSystem\"),\n        FileUtils            = brackets.getModule(\"file/FileUtils\"),\n        PreferencesManager   = brackets.getModule(\"preferences/PreferencesManager\"),\n        SpecRunnerUtils      = brackets.getModule(\"spec/SpecRunnerUtils\"),\n        JSCodeHints          = require(\"main\"),\n        Preferences          = brackets.getModule(\"JSUtils/Preferences\"),\n        ScopeManager         = brackets.getModule(\"JSUtils/ScopeManager\"),\n        HintUtils            = brackets.getModule(\"JSUtils/HintUtils\"),\n        HintUtils2           = require(\"HintUtils2\"),\n        ParameterHintProvider = require(\"ParameterHintsProvider\").JSParameterHintsProvider,\n        phProvider            = new ParameterHintProvider();\n\n    var extensionPath   = FileUtils.getNativeModuleDirectoryPath(module),\n        testPath        = extensionPath + \"/unittest-files/basic-test-files/file1.js\",\n        testHtmlPath    = extensionPath + \"/unittest-files/basic-test-files/index.html\",\n        testDoc         = null,\n        testEditor,\n        preTestText;\n\n    CommandManager.register(\"test-file-open\", Commands.FILE_OPEN, function (fileInfo) {\n        // Register a command for FILE_OPEN, which the jump to def code will call\n        return DocumentManager.getDocumentForPath(fileInfo.fullPath).done(function (doc) {\n            MainViewManager._edit(MainViewManager.ACTIVE_PANE, doc);\n        });\n    });\n\n    describe(\"extension:JavaScript Code Hinting\", function () {\n\n        // Helper function for testing cursor position\n        function fixPos(pos) {\n            if (!(\"sticky\" in pos)) {\n                pos.sticky = null;\n            }\n            return pos;\n        }\n\n        /*\n         * Ask provider for hints at current cursor position; expect it to\n         * return some\n         *\n         * @param {Object} provider - a CodeHintProvider object\n         * @param {string} key - the charCode of a key press that triggers the\n         *      CodeHint provider\n         * @return {boolean} - whether the provider has hints in the context of\n         *      the test editor\n         */\n        function expectHints(provider, key) {\n            if (key === undefined) {\n                key = null;\n            }\n\n            expect(provider.hasHints(testEditor, key)).toBe(true);\n            return provider.getHints(null);\n        }\n\n        /*\n         * Ask provider for hints at current cursor position; expect it NOT to\n         * return any\n         *\n         * @param {Object} provider - a CodeHintProvider object\n         * @param {string} key - the charCode of a key press that triggers the\n         *      CodeHint provider\n         */\n        function expectNoHints(provider, key) {\n\n            if (key === undefined) {\n                key = null;\n            }\n\n            expect(provider.hasHints(testEditor, key)).toBe(false);\n        }\n\n        /*\n         * Return the index at which hint occurs in hintList\n         *\n         * @param {Array.<Object>} hintList - the list of hints\n         * @param {string} hint - the hint to search for\n         * @return {number} - the index into hintList at which the hint occurs,\n         * or -1 if it does not\n         */\n        function _indexOf(hintList, hint) {\n            var index = -1,\n                counter = 0;\n\n            for (counter; counter < hintList.length; counter++) {\n                if (hintList[counter].data(\"token\").value === hint) {\n                    index = counter;\n                    break;\n                }\n            }\n            return index;\n        }\n\n        /*\n         * Wait for a hint response object to resolve, then apply a callback\n         * to the result\n         *\n         * @param {Object + jQuery.Deferred} hintObj - a hint response object,\n         *      possibly deferred\n         * @param {Function} callback - the callback to apply to the resolved\n         *      hint response object\n         */\n        function _waitForHints(hintObj, callback) {\n            var complete = false,\n                hintList = null;\n\n            if (hintObj.hasOwnProperty(\"hints\")) {\n                complete = true;\n                hintList = hintObj.hints;\n            } else {\n                hintObj.done(function (obj) {\n                    complete = true;\n                    hintList = obj.hints;\n                });\n            }\n\n            waitsFor(function () {\n                return complete;\n            }, \"Expected hints did not resolve\", 3000);\n\n            runs(function () { callback(hintList); });\n        }\n\n        /*\n         * Test if hints should be closed or not closed at a given position.\n         *\n         * @param {Object} provider - a CodeHintProvider object\n         * @param {Object + jQuery.Deferred} hintObj - a hint response object,\n         *      possibly deferred\n         * @param {line: number, ch: number} newPos - new position to move to\n         * after hints are received.\n         * @param {boolean} expectedValue - true if hints should close,\n         * false otherwise.\n         */\n        function expectCloseHints(provider, hintObj, newPos, expectedValue) {\n            _waitForHints(hintObj, function (hintList) {\n                testEditor.setCursorPos(newPos);\n                expect(provider.shouldCloseHints(JSCodeHints.getSession())).toBe(expectedValue);\n            });\n        }\n\n        /*\n         * Expect a given list of hints to be absent from a given hint\n         * response object\n         *\n         * @param {Object + jQuery.Deferred} hintObj - a hint response object,\n         *      possibly deferred\n         * @param {Array.<string>} absentHints - a list of hints that should not\n         *      be present in the hint response\n         */\n        function hintsAbsent(hintObj, absentHints) {\n            _waitForHints(hintObj, function (hintList) {\n                expect(hintList).toBeTruthy();\n                absentHints.forEach(function (absentHint) {\n                    expect(_indexOf(hintList, absentHint)).toBe(-1);\n                });\n            });\n        }\n\n        /*\n         * Expect a given list of hints to be present in a given hint\n         * response object\n         *\n         * @param {Object + jQuery.Deferred} hintObj - a hint response object,\n         *      possibly deferred\n         * @param {Array.<string>} expectedHints - a list of hints that should be\n         *      present in the hint response\n         */\n        function hintsPresent(hintObj, expectedHints) {\n            _waitForHints(hintObj, function (hintList) {\n                expect(hintList).toBeTruthy();\n                expectedHints.forEach(function (expectedHint) {\n                    expect(_indexOf(hintList, expectedHint)).not.toBe(-1);\n                });\n            });\n        }\n\n        /*\n         * Expect a given list of hints to be present in the given order in a\n         * given hint response object\n         *\n         * @param {Object + jQuery.Deferred} hintObj - a hint response object,\n         *      possibly deferred\n         * @param {Array.<string>} expectedHints - a list of hints that should be\n         *      present in the given order in the hint response\n         */\n        function hintsPresentOrdered(hintObj, expectedHints) {\n            var prevIndex = -1,\n                currIndex;\n\n            _waitForHints(hintObj, function (hintList) {\n                expect(hintList).toBeTruthy();\n                expectedHints.forEach(function (expectedHint) {\n                    currIndex = _indexOf(hintList, expectedHint);\n                    expect(currIndex).toBeGreaterThan(prevIndex);\n                    prevIndex = currIndex;\n                });\n            });\n        }\n\n        /*\n         * Expect a given list of hints to be present in a given hint\n         * response object, and no more.\n         *\n         * @param {Object + jQuery.Deferred} hintObj - a hint response object,\n         *      possibly deferred\n         * @param {Array.<string>} expectedHints - a list of hints that should be\n         *      present in the hint response, and no more.\n         */\n        function hintsPresentExact(hintObj, expectedHints) {\n            _waitForHints(hintObj, function (hintList) {\n                expect(hintList).toBeTruthy();\n                expect(hintList.length).toBe(expectedHints.length);\n                expectedHints.forEach(function (expectedHint, index) {\n                    expect(hintList[index].data(\"token\").value).toBe(expectedHint);\n                });\n            });\n        }\n\n        /**\n         * Find the index of a string in a list of hints.\n         * @param {Array} hintList - the list of hints\n         * @param {string} hintSelection - the string represenation of the hint\n         *  to find the index of\n         * @return {number} the index of the hint corresponding to the hintSelection\n         */\n        function findHint(hintList, hintSelection) {\n            var i, l;\n            for (i = 0, l = hintList.length; i < l; ++i) {\n                var current = hintList[i].data(\"token\");\n                if (hintSelection === current.value) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n        /*\n         * Simulation of selection of a particular hint in a hint list.\n         * Presumably results in side effects in the hint provider's\n         * current editor context.\n         *\n         * @param {Object} provider - a CodeHint provider object\n         * @param {Object} hintObj - a hint response object from that provider,\n         *      possibly deferred\n         * @param {string} hintSelection - the hint to select\n         */\n        function selectHint(provider, hintObj, hintSelection) {\n            expectHints(provider);\n            _waitForHints(hintObj, function (hintList) {\n                expect(hintList).toBeTruthy();\n                var index = findHint(hintList, hintSelection);\n                expect(hintList[index].data(\"token\")).toBeTruthy();\n                expect(provider.insertHint(hintList[index])).toBe(false);\n            });\n        }\n\n        /**\n         * Wait for the editor to change positions, such as after a jump to\n         * definition has been triggered.  Will timeout after 3 seconds\n         *\n         * @param {{line:number, ch:number}} oldLocation - the original line/col\n         * @param {Function} callback - the callback to apply once the editor has changed position\n         */\n        function _waitForJump(jumpPromise, callback) {\n            var cursor = null,\n                complete = false;\n\n            jumpPromise.done(function () {\n                complete = true;\n            });\n\n            waitsFor(function () {\n                var activeEditor = EditorManager.getActiveEditor();\n                cursor = activeEditor.getCursorPos();\n                return complete;\n            }, \"Expected jump did not occur\", 3000);\n\n            runs(function () { callback(cursor); });\n        }\n\n        /**\n         * Trigger a jump to definition, and verify that the editor jumped to\n         * the expected location. The new location is the variable definition\n         * or function definition of the variable or function at the current\n         * cursor location. Jumping to the new location will cause a new editor\n         * to be opened or open an existing editor.\n         *\n         * @param {{line:number, ch:number, file:string}} expectedLocation - the\n         *  line, column, and optionally the new file the editor should jump to.  If the\n         *  editor is expected to stay in the same file, then file may be omitted.\n         */\n        function editorJumped(expectedLocation) {\n            var jumpPromise = JSCodeHints.handleJumpToDefinition();\n\n\n            _waitForJump(jumpPromise, function (newCursor) {\n                expect(newCursor.line).toBe(expectedLocation.line);\n                expect(newCursor.ch).toBe(expectedLocation.ch);\n                if (expectedLocation.file) {\n                    var activeEditor = EditorManager.getActiveEditor();\n                    expect(activeEditor.document.file.name).toBe(expectedLocation.file);\n                }\n            });\n\n        }\n\n        /**\n         * Verify there is no parameter hint at the current cursor.\n         */\n        function expectNoParameterHint() {\n            var requestStatus = undefined;\n            runs(function () {\n                var request = phProvider._getParameterHint();\n                request.fail(function (status) {\n                    requestStatus = status;\n                });\n\n                waitsForFail(request, \"ParameterHints\");\n            });\n\n            runs(function () {\n                expect(requestStatus).toBe(null);\n            });\n        }\n\n        /**\n         * Verify the parameter hint is not visible.\n         */\n        function expectParameterHintClosed() {\n            expect(phProvider.isHintDisplayed()).toBe(false);\n        }\n\n        /**\n         * Show a function hint based on the code at the cursor. Verify the\n         * hint matches the passed in value.\n         *\n         * @param {Array<{name: string, type: string, isOptional: boolean}>}\n         * expectedParams - array of records, where each element of the array\n         * describes a function parameter. If null, then no hint is expected.\n         * @param {number} expectedParameter - the parameter at cursor.\n         */\n        function expectParameterHint(expectedParams, expectedParameter) {\n            var requestHints = undefined,\n                request = null;\n\n            function expectHint(hint) {\n                var params = hint.parameters,\n                    n = params.length,\n                    i;\n\n                // compare params to expected params\n                expect(params.length).toBe(expectedParams.length);\n                expect(hint.currentIndex).toBe(expectedParameter);\n\n                for (i = 0; i < n; i++) {\n\n                    expect(params[i].name).toBe(expectedParams[i].name);\n                    expect(params[i].type).toBe(expectedParams[i].type);\n                    if (params[i].isOptional) {\n                        expect(expectedParams[i].isOptional).toBeTruthy();\n                    } else {\n                        expect(expectedParams[i].isOptional).toBeFalsy();\n                    }\n                }\n\n            }\n\n            runs(function () {\n                request = phProvider._getParameterHint();\n\n                if (expectedParams === null) {\n                    request.fail(function (result) {\n                        requestHints = result;\n                    });\n\n                    waitsForFail(request, \"ParameterHints\");\n                } else {\n                    request.done(function (result) {\n                        requestHints = result;\n                    });\n\n                    waitsForDone(request, \"ParameterHints\");\n                }\n            });\n\n            if (expectedParams === null) {\n                expect(requestHints).toBe(null);\n            } else {\n                expectHint(requestHints);\n            }\n        }\n\n        function setupTest(path, primePump) { // FIXME: primePump argument ignored even though used below\n            DocumentManager.getDocumentForPath(path).done(function (doc) {\n                testDoc = doc;\n            });\n\n            waitsFor(function () {\n                return testDoc !== null;\n            }, \"Unable to open test document\", 10000);\n\n            // create Editor instance (containing a CodeMirror instance)\n            runs(function () {\n                testEditor = SpecRunnerUtils.createMockEditorForDocument(testDoc);\n                preTestText = testDoc.getText();\n                waitsForDone(ScopeManager._readyPromise());\n                waitsForDone(ScopeManager._maybeReset(JSCodeHints.getSession(), testDoc, true));\n            });\n        }\n\n        function tearDownTest() {\n            // Restore the pre-test version of the text here because the hinter\n            // will update the contents of the previous document in tern.\n            testDoc.setText(preTestText);\n\n            // The following call ensures that the document is reloaded\n            // from disk before each test\n            MainViewManager._closeAll(MainViewManager.ALL_PANES);\n            SpecRunnerUtils.destroyMockEditor(testDoc);\n            testEditor = null;\n            testDoc = null;\n        }\n\n        describe(\"JavaScript Code Hinting Basic\", function () {\n            beforeFirst(function () {\n                brackets._configureJSCodeHints({\n                    noReset: true\n                });\n            });\n\n            afterLast(function () {\n                brackets._configureJSCodeHints({\n                    noReset: false\n                });\n            });\n\n            beforeEach(function () {\n                setupTest(testPath, false);\n            });\n\n            afterEach(function () {\n                tearDownTest();\n            });\n\n            it(\"should not list hints in string literal\", function () {\n                testEditor.setCursorPos({ line: 20, ch: 22 });\n                expectNoHints(JSCodeHints.jsHintProvider);\n            });\n\n            it(\"should list declared variable and function names in outer scope\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"A2\", \"A3\", \"funB\", \"A1\"]);\n            });\n\n            it(\"should filter hints by query\", function () {\n                testEditor.setCursorPos({ line: 5, ch: 10 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"A1\", \"A2\", \"A3\"]);\n                hintsAbsent(hintObj, [\"funB\"]);\n            });\n\n            it(\"should list keywords\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"break\", \"case\", \"catch\"]);\n            });\n\n            xit(\"should list explicitly defined globals from JSLint annotations\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"brackets\", \"$\"]);\n            });\n\n            xit(\"should list implicitly defined globals from JSLint annotations\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"alert\", \"console\", \"confirm\", \"navigator\", \"window\", \"frames\"]);\n            });\n\n            it(\"should NOT list implicitly defined globals from missing JSLint annotations\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"ActiveXObject\", \"CScript\", \"VBArray\"]);\n            });\n\n            it(\"should NOT list explicitly defined globals from JSLint annotations in other files\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"crazyGlobal\", \"anotherCrazyGlobal\"]);\n            });\n\n            it(\"should NOT list implicitly defined globals from JSLint annotations in other files\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"spawn\", \"version\", \"toint32\"]);\n            });\n\n            it(\"should list literal constants\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"null\", \"undefined\", \"true\", \"false\"]);\n            });\n\n            it(\"should NOT list variables, function names and parameter names out of scope\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"paramB2\", \"paramB1\"]);\n            });\n\n            it(\"should NOT list variables, function names and parameter names in other files\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"E1\", \"E2\"]);\n            });\n\n            it(\"should NOT list property names on value lookups\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"propA\", \"propB\", \"propC\"]);\n            });\n\n            it(\"should list declared variable, function and parameter names in inner scope\", function () {\n                testEditor.setCursorPos({ line: 12, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"B1\", \"B2\", \"funC\", \"paramB1\", \"paramB2\", \"funB\", \"A1\", \"A2\", \"A3\"]);\n            });\n\n            xit(\"should list string literals that occur in the file\", function () {\n                testEditor.setCursorPos({ line: 12, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"use strict\"]);\n            });\n\n            it(\"should NOT list string literals from other files\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"a very nice string\"]);\n            });\n\n            it(\"should list property names that have been declared in the file\", function () {\n                testEditor.setCursorPos({ line: 17, ch: 11 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"propB\"]);\n            });\n\n            it(\"should list identifier names that occur in other files\", function () {\n                testEditor.setCursorPos({ line: 16, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"D1\", \"D2\"]);\n            });\n\n            it(\"should NOT list variable, parameter or function names on property lookups\", function () {\n                testEditor.setCursorPos({ line: 17, ch: 11 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"A1\", \"A2\", \"funB\", \"paramB1\", \"paramB2\", \"B1\", \"B2\", \"funC\", \"paramC1\", \"paramC2\"]);\n            });\n\n            it(\"should NOT list keywords on property lookups\", function () {\n                testEditor.setCursorPos({ line: 17, ch: 11 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsAbsent(hintObj, [\"case\", \"function\", \"var\"]);\n            });\n\n            it(\"should close hints when move over '.' \", function () {\n                testEditor.setCursorPos({ line: 17, ch: 11 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 10 }, true);\n            });\n\n            it(\"should close hints only when move off the end of a property \", function () {\n                testEditor.setCursorPos({ line: 17, ch: 11 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 12 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 13 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 14 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 15 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 16 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 17 }, true);\n            });\n\n            it(\"should close hints only when move off the beginning of an identifier \", function () {\n                testEditor.setCursorPos({ line: 17, ch: 10 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 9 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 8 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 17, ch: 7 }, true);\n            });\n\n            it(\"should close hints only when move off the beginning of a keyword \", function () {\n                testEditor.setCursorPos({ line: 24, ch: 7 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"var\"]);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 24, ch: 6 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 24, ch: 5 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 24, ch: 4 }, false);\n                expectCloseHints(JSCodeHints.jsHintProvider, hintObj,\n                    { line: 24, ch: 3 }, true);\n            });\n\n            it(\"should NOT list implicit hints on left-brace\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                expectNoHints(JSCodeHints.jsHintProvider, \"{\");\n            });\n\n            it(\"should list explicit hints for variable and function names\", function () {\n                testEditor.setCursorPos({ line: 6, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider, null);\n                hintsPresent(hintObj, [\"A2\", \"A3\", \"funB\", \"A1\"]);\n            });\n\n            it(\"should list implicit hints when typing property lookups\", function () {\n                testEditor.setCursorPos({ line: 17, ch: 10 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider, \".\");\n                hintsPresent(hintObj, [\"B1\", \"paramB1\"]);\n            });\n\n            it(\"should give priority to identifier names associated with the current context\", function () {\n                testEditor.setCursorPos({ line: 16, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresentOrdered(hintObj, [\"C1\", \"B1\"]);\n                hintsPresentOrdered(hintObj, [\"C2\", \"B2\"]);\n            });\n\n            it(\"should give priority to property names associated with the current context from other files\", function () {\n                testEditor.setCursorPos({ line: 16, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresentOrdered(hintObj, [\"C1\", \"D1\"]);\n                hintsPresentOrdered(hintObj, [\"B1\", \"D1\"]);\n                hintsPresentOrdered(hintObj, [\"A1\", \"D1\"]);\n                hintsPresentOrdered(hintObj, [\"funB\", \"funE\"]);\n            });\n\n            xit(\"should choose the correct delimiter for string literal hints with no query\", function () {\n                var start = { line: 18, ch: 0 },\n                    end   = { line: 18, ch: 18 };\n\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, 13); // hint 13 is \"hello\\\\\\\"world!\"\n                runs(function () {\n                    expect(testEditor.getCursorPos()).toEqual(end);\n                    expect(testDoc.getRange(start, end)).toEqual('\"hello\\\\\\\\\\\\\" world!\"');\n                });\n            });\n\n            it(\"should insert value hints with no current query\", function () {\n                var start = { line: 6, ch: 0 },\n                    end   = { line: 6, ch: 2 };\n\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"A2\");\n                runs(function () {\n                    //expect(testEditor.getCursorPos()).toEqual(end);\n                    expect(testDoc.getRange(start, end)).toEqual(\"A2\");\n                });\n            });\n\n            it(\"should insert value hints replacing the current query\", function () {\n                var start   = { line: 5, ch: 10 }, // A3 = A<here>2;\n                    before  = { line: 5, ch: 9 },\n                    end     = { line: 5, ch: 11 };\n\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresent(hintObj, [\"A1\", \"A2\", \"A3\"]);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"A1\");\n                runs(function () {\n                    //expect(testEditor.getCursorPos()).toEqual(end);\n                    expect(testDoc.getRange(before, end)).toEqual(\"A1\");\n                });\n            });\n\n            it(\"should insert property hints with no current query\", function () {\n                var start   = { line: 6, ch: 0 },\n                    middle  = { line: 6, ch: 3 },\n                    end     = { line: 6, ch: 8 };\n\n                testDoc.replaceRange(\"A1.\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"propA\");\n\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, end)).toEqual(\"A1.propA\");\n                    expect(testDoc.getLine(end.line).length).toEqual(8);\n                });\n            });\n\n            it(\"should insert, not replace, property hints with no current query\", function () {\n                var start   = { line: 6, ch: 0 },\n                    middle  = { line: 6, ch: 3 },\n                    end     = { line: 6, ch: 8 },\n                    endplus = { line: 6, ch: 12 };\n\n                testDoc.replaceRange(\"A1.prop\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"propA\");\n\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, endplus)).toEqual(\"A1.propAprop\");\n                    expect(testDoc.getLine(end.line).length).toEqual(12);\n                });\n            });\n\n            it(\"should insert, not replace, property hints with a partial current query\", function () {\n                var start   = { line: 6, ch: 0 },\n                    middle  = { line: 6, ch: 6 },\n                    end     = { line: 6, ch: 8 };\n\n                testDoc.replaceRange(\"A1.pro\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"propA\");\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, end)).toEqual(\"A1.propA\");\n                    expect(testDoc.getLine(end.line).length).toEqual(8);\n                });\n            });\n\n            it(\"should replace property hints replacing a partial current query\", function () {\n                var start   = { line: 6, ch: 0 },\n                    middle  = { line: 6, ch: 6 },\n                    end     = { line: 6, ch: 8 },\n                    endplus = { line: 6, ch: 10 };\n\n                testDoc.replaceRange(\"A1.propB\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"propA\");\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, endplus)).toEqual(\"A1.propApB\");\n                    expect(testDoc.getLine(end.line).length).toEqual(10);\n                });\n            });\n\n            it(\"should replace property hints but not following delimiters\", function () {\n                var start   = { line: 6, ch: 0 },\n                    middle  = { line: 6, ch: 4 },\n                    end     = { line: 6, ch: 9 },\n                    endplus = { line: 6, ch: 14 };\n\n                testDoc.replaceRange(\"(A1.prop)\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"propA\");\n\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, endplus)).toEqual(\"(A1.propAprop)\");\n                    expect(testDoc.getLine(endplus.line).length).toEqual(14);\n                });\n            });\n\n            it(\"should list hints for string, as string assigned to 's', 's' assigned to 'r' and 'r' assigned to 't'\", function () {\n                var start = { line: 26, ch: 0 },\n                    middle = { line: 26, ch: 6 };\n\n                // pad spaces here as tern has issue,without space, no code hint\n                testDoc.replaceRange(\"    t.\", start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentOrdered(hintObj, [\"charAt\", \"charCodeAt\", \"concat\", \"indexOf\"]);\n                });\n            });\n\n            it(\"should list function type\", function () {\n                var start = { line: 37, ch: 0 },\n                    middle = { line: 37, ch: 5 };\n\n                testDoc.replaceRange(\"funD(\", start, start);\n                testEditor.setCursorPos(middle);\n                runs(function () {\n                    expectParameterHint([{name: \"a\", type: \"String\"},\n                        {name: \"b\", type: \"Number\"}], 0);\n                });\n            });\n\n            it(\"should list exports from a requirejs module\", function () {\n                var start = { line: 40, ch: 21 };\n\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentExact(hintObj, [\"a\", \"b\", \"c\", \"j\"]);\n                });\n            });\n\n            it(\"should list later defined property names\", function () {\n                var start = { line: 17, ch: 11 };\n\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentExact(hintObj, [\"foo\", \"propB\"]);\n                });\n            });\n\n            it(\"should list matching property names\", function () {\n                var cursor1 = { line: 12, ch: 0 },\n                    cursor2 = { line: 12, ch: 6 };\n\n                testDoc.replaceRange(\"paramB\", cursor1, cursor1);\n                testEditor.setCursorPos(cursor2);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentExact(hintObj, [\"paramB1\", \"paramB2\"]);\n                });\n            });\n\n            it(\"should take anotation parameter type:String\", function () {\n                var start = { line: 37, ch: 21 };\n\n                testDoc.replaceRange(\"var k= funD(10,11).x.\", start, start);\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentOrdered(hintObj, [\"charAt\", \"charCodeAt\", \"concat\", \"indexOf\"]);\n                });\n            });\n\n            it(\"should take anotation parameter type:Number\", function () {\n                var start = { line: 37, ch: 21 };\n\n                testDoc.replaceRange(\"var k= funD(10,11).y.\", start, start);\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentOrdered(hintObj, [\"toExponential\", \"toFixed\", \"toString\"]);\n                });\n            });\n\n            it(\"should add new method on String .prototype\", function () {\n                var start = { line: 37, ch: 0 };\n                var testPos = { line: 40, ch: 12 };\n                testDoc.replaceRange(\"String.prototype.times = function (count) {\\n\" + \"\\treturn count < 1 ? '' : new Array[count + 1].join(this);\\n};\\n\\\"hello\\\".tim\", start, start);\n                testEditor.setCursorPos(testPos);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentOrdered(hintObj, [\"times\", \"trim\"]);\n                });\n            });\n\n            it(\"should list function defined from .prototype\", function () {\n                var start = { line: 59, ch: 5 };\n\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentExact(hintObj, [\"calc\"]);\n                });\n            });\n\n            it(\"should list function type defined from .prototype\", function () {\n                var start = { line: 59, ch: 10 };\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    expectParameterHint([{name: \"a4\", type: \"Number\"}, {name: \"b4\", type: \"Number\"}], 0);\n                });\n            });\n\n            it(\"should list function inherited from super class\", function () {\n                var start = { line: 79, ch: 11 };\n                testEditor.setCursorPos(start);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentExact(hintObj, [\"amountDue\", \"getAmountDue\", \"getName\", \"name\", \"setAmountDue\"]);\n                });\n            });\n\n            it(\"should show argument from from .prototype.Method\", function () {\n                var start = { line: 80, ch: 0 },\n                    testPos = { line: 80, ch: 24 };\n\n                testDoc.replaceRange(\"myCustomer.setAmountDue(\", start);\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"amountDue\", type: \"Object\"}], 0);\n                });\n            });\n\n            it(\"should show inner function type\", function () {\n                var testPos = { line: 96, ch: 23 };\n\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"arg\", type: \"String\"}], 0);\n                });\n            });\n\n            it(\"should show type for inner function returned function\", function () {\n                var testPos = { line: 96, ch: 33 };\n\n                testEditor.setCursorPos(testPos);\n                expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    expectParameterHint([], 0);\n                });\n\n            });\n\n            // parameter type anotation tests, due to another bug #3670: first argument has ?\n            xit(\"should list parameter Date,boolean type\", function () {\n                var start = { line: 109, ch: 0 },\n                    testPos = { line: 109, ch: 11 };\n\n                testDoc.replaceRange(\"funTypeAn1(\", start);\n                testEditor.setCursorPos(testPos);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentExact(hintObj, [\"funTypeAn1((a: bool, b: Date) -> {x, y}\"]);\n                });\n            });\n\n            // parameter type anotation tests, due to another bug #3670: first argument has ?\n            xit(\"should list parameter function type and best guess for its argument/return types\", function () {\n                var testPos = { line: 123, ch: 11 };\n\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"f\", type: \"function(): number\"}], 0);\n                });\n            });\n\n            // parameter type annotation tests\n            it(\"should list parameter function type and best guess for function call/return types\", function () {\n                var testPos = { line: 139, ch: 12 };\n\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"f\", type: \"function(String, Number):String\"}], 0);\n                });\n            });\n\n            it(\"should list array containing functions\", function () {\n                var testPos = { line: 142, ch: 7 };\n\n                testEditor.setCursorPos(testPos);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresent(hintObj, [\"index1\", \"index2\"]);\n                });\n            });\n\n            it(\"should list function reference\", function () {\n                var start = { line: 144, ch: 0 },\n                    testPos = { line: 144, ch: 14 };\n\n                testDoc.replaceRange(\"funArr.index1(\", start);\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([], 0);\n                });\n            });\n\n            it(\"should insert hint as [\\\"my-key\\\"] since 'my-key' is not a valid property name\", function () {\n                var start = { line: 49, ch: 0 },\n                    middle = { line: 49, ch: 5 },\n                    end = { line: 49, ch: 13 };\n\n                testDoc.replaceRange(\"arr.m\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"my-key\");\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, end)).toEqual(\"arr[\\\"my-key\\\"]\");\n                    expect(testDoc.getLine(end.line).length).toEqual(13);\n                });\n            });\n\n            it(\"should insert hint as [\\\"my-key\\\"] make sure this works if nothing is typed after the '.'\", function () {\n                var start = { line: 49, ch: 0 },\n                    middle = { line: 49, ch: 4 },\n                    end = { line: 49, ch: 13 };\n\n                testDoc.replaceRange(\"arr.\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"my-key\");\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, end)).toEqual(\"arr[\\\"my-key\\\"]\");\n                    expect(testDoc.getLine(end.line).length).toEqual(13);\n                });\n            });\n\n            it(\"should insert hint as '.for' since keywords can be used as property names\", function () {\n                var start = { line: 49, ch: 0 },\n                    middle = { line: 49, ch: 5 },\n                    end = { line: 49, ch: 7 };\n\n                testDoc.replaceRange(\"arr.f\", start, start);\n                testEditor.setCursorPos(middle);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"for\");\n                runs(function () {\n                    expect(fixPos(testEditor.getCursorPos())).toEqual(fixPos(end));\n                    expect(testDoc.getRange(start, end)).toEqual(\"arr.for\");\n                    expect(testDoc.getLine(end.line).length).toEqual(7);\n                });\n            });\n\n            it(\"should jump to function\", function () {\n                var start = { line: 43, ch: 0 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 7, ch: 13});\n                });\n            });\n\n            it(\"should jump to var\", function () {\n                var start = { line: 44, ch: 10 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 3, ch: 6});\n                });\n            });\n\n            it(\"should jump to closure, early defined var\", function () {\n                var start = { line: 17, ch: 9 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 10, ch: 10});\n                });\n            });\n\n            it(\"should jump to the definition in new module file\", function () {\n                var start = { line: 40, ch: 22 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 4, ch: 13, file: \"MyModule.js\"}); //jump to another file\n                });\n            });\n\n            it(\"should jump to the method definition in .prototype\", function () {\n                var start = { line: 59, ch: 8 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 53, ch: 21}); //jump to prototype.calc\n                });\n            });\n\n            it(\"should jump to parameter passed in the method\", function () {\n                var start = { line: 63, ch: 20 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 61, ch: 27});\n                });\n            });\n\n            it(\"should jump to parameter passed in anonymous method\", function () {\n                var start = { line: 83, ch: 25 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 81, ch: 53});\n                });\n            });\n\n            it(\"should jump to inner method\", function () {\n                var start = { line: 96, ch: 32 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 94, ch: 17});\n                });\n            });\n\n            it(\"should jump to the actual function definition, and not the exports line\", function () {\n                var start = { line: 159, ch: 22 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 11, ch: 14, file: \"MyModule.js\"}); //jump to another file\n                });\n            });\n\n            it(\"should not hint function, variable, or param decls\", function () {\n                var func = { line: 7, ch: 12 },\n                    param = { line: 7, ch: 18 },\n                    variable = { line: 10, ch: 10 };\n\n                runs(function () {\n                    testEditor.setCursorPos(func);\n                    expectNoParameterHint();\n                    testEditor.setCursorPos(param);\n                    expectNoHints(JSCodeHints.jsHintProvider);\n                    testEditor.setCursorPos(variable);\n                    expectNoHints(JSCodeHints.jsHintProvider);\n                });\n            });\n\n            it(\"should sort underscore names to the bottom\", function () {\n                testEditor.setCursorPos({ line: 146, ch: 0 });\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                hintsPresentOrdered(hintObj, [\"A1\", \"A2\", \"A3\", \"funB\", \"_A1\"]);\n            });\n\n            it(\"should list all properties for unknown type\", function () {\n                var start = { line: 149, ch: 0 },\n                    end   = { line: 149, ch: 5 };\n\n                testDoc.replaceRange(\"help.\", start, start);\n                testEditor.setCursorPos(end);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                // check we have a properties from \"Function\", \"String\", and \"Array\"\n                hintsPresentOrdered(hintObj, [\"apply\", \"charCodeAt\", \"concat\"]);\n            });\n\n            it(\"should switch to guesses after typing a query that does not match any hints\", function () {\n                var start = { line: 150, ch: 0 },\n                    end   = { line: 150, ch: 5 };\n\n                testDoc.replaceRange(\"s.shift\", start, start);\n                testEditor.setCursorPos(end);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                // check we have a properties that start with \"shift\"\n                hintsPresentOrdered(hintObj, [\"shift\", \"shiftKey\"]);\n            });\n\n            it(\"should handle valid non-ascii characters in a property name\", function () {\n                var start = { line: 153, ch: 0 },\n                    end   = { line: 153, ch: 13 };\n\n                testDoc.replaceRange(\"hope.frenchP\", start, start);\n                testEditor.setCursorPos(end);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                // check we have a properties that start with \"shift\"\n                hintsPresentOrdered(hintObj, [\"frenchProp\"]);\n            });\n\n            it(\"should show guessed argument type from current passing parameter\", function () {\n                var start = { line: 80, ch: 0 },\n                    testPos = { line: 80, ch: 24 };\n                testDoc.replaceRange(\"myCustomer.setAmountDue(10)\", start);\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"amountDue\", type: \"Number\"}], 0);\n                });\n            });\n\n            it(\"should list parameter hint for record type annotation\", function () {\n                var testPos = { line: 178, ch: 25 };\n\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"t\", type: \"{index: Number, name: String}\"}], -1);\n                });\n            });\n\n            it(\"should list parameter hint for optional parameters\", function () {\n                var testPos = { line: 214, ch: 17 };\n\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"a\", type: \"Number\", isOptional: true}, {name: \"b\", type: \"String\", isOptional: true}], 0);\n                });\n            });\n\n            it(\"should list parameter hint for a function parameter\", function () {\n                var testPos = { line: 181, ch: 12 };\n\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"compare\",\n                        type: \"function(Object, Object):Number\",\n                        isOptional: true}], -1);\n                });\n            });\n\n            it(\"should list parameter hint for an array parameter\", function () {\n                var testPos = { line: 184, ch: 12 };\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"other\", type: \"Array.<Object>\"}], -1);\n                });\n            });\n\n            it(\"should list parameter hint for a source array annotation\", function () {\n                var testPos = { line: 200, ch: 20 };\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"a\", type: \"Array.<String>\"}], 0);\n                });\n            });\n\n            it(\"should close parameter hint when move off function\", function () {\n                var testPos = { line: 184, ch: 12 },\n                    endPos  = { line: 184, ch: 19 };\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"other\", type: \"Array.<Object>\"}], -1);\n                });\n\n                runs(function () {\n                    testEditor.setCursorPos(endPos);\n                    expectParameterHintClosed();\n                });\n            });\n\n            it(\"should close parameter hint when move off function to another function\", function () {\n                var testPos = { line: 184, ch: 12 },\n                    newPos  = { line: 181, ch: 12 };\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"other\", type: \"Array.<Object>\"}], -1);\n                });\n\n                runs(function () {\n                    testEditor.setCursorPos(newPos);\n                    expectParameterHintClosed();\n                });\n            });\n\n            it(\"should update current parameter as the cursor moves\", function () {\n                var testPos = { line: 186, ch: 19 },\n                    newPos  = { line: 186, ch: 20 };\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    expectParameterHint([{name: \"char\", type: \"String\"},\n                        {name: \"from\", type: \"Number\", isOptional: true}], 0);\n                });\n\n                runs(function () {\n                    testEditor.setCursorPos(newPos);\n                    expectParameterHint([{name: \"char\", type: \"String\"},\n                        {name: \"from\", type: \"Number\", isOptional: true}], 1);\n                });\n            });\n\n            // Test `jscodehints.noHintsOnDot` preference\n            it(\"should consider dot a hintable key based on preference\", function () {\n                var noHintsOnDot = PreferencesManager.get(\"jscodehints.noHintsOnDot\");\n\n                testEditor.setCursorPos({ line: 44, ch: 10 });\n\n                // Default is falsey\n                expect(noHintsOnDot).toBeFalsy();\n\n                // Should get hints after dot\n                expectHints(JSCodeHints.jsHintProvider, \".\");\n\n                // Set preference to true\n                PreferencesManager.set(\"jscodehints.noHintsOnDot\", true);\n\n                // Should no longer get hints after dot\n                expectNoHints(JSCodeHints.jsHintProvider, \".\");\n\n                // Set preference back to original value (converted to boolean)\n                PreferencesManager.set(\"jscodehints.noHintsOnDot\", !!noHintsOnDot);\n            });\n        });\n\n        describe(\"JavaScript Code Hinting in a HTML file\", function () {\n\n            beforeEach(function () {\n                setupTest(testHtmlPath, false);\n            });\n\n            afterEach(function () {\n                tearDownTest();\n            });\n\n            it(\"basic codehints in html file\", function () {\n                var start = { line: 37, ch: 9 },\n                    end   = { line: 37, ch: 13};\n\n                testDoc.replaceRange(\"x100.\", start);\n                testEditor.setCursorPos(end);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresentOrdered(hintObj, [\"charAt\", \"charCodeAt\", \"concat\", \"indexOf\"]);\n                });\n            });\n\n            it(\"function type hint in html file\", function () {\n                var start = { line: 36, ch: 12 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    expectParameterHint([{name: \"a\", type: \"Number\"}], 0);\n                });\n            });\n\n            it(\"should show function type code hint for function in script file inside html file\", function () {\n                var start = { line: 22, ch: 17 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    expectParameterHint([{name: \"a\", type: \"String\"}, {name: \"b\", type: \"Number\"}], 0);\n                });\n            });\n\n            it(\"should show function type code hint for function in another script file inside html file\", function () {\n                var start = { line: 23, ch: 17 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    expectParameterHint([{name: \"paramE1\", type: \"D1\"}, {name: \"paramE2\", type: \"Number\"}], 0);\n                });\n            });\n\n            it(\"should show global variable in another script file inside html file\", function () {\n                var start        = { line: 27, ch: 8 },\n                    end          = { line: 27, ch: 13},\n                    testPosStart = { line: 27, ch: 11},\n                    testPosEnd   = { line: 27, ch: 21};\n\n                testDoc.replaceRange(\"arr.m\", start);\n\n                testEditor.setCursorPos(end);\n                var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                runs(function () {\n                    hintsPresent(hintObj, [\"my-key\"]);\n                });\n                selectHint(JSCodeHints.jsHintProvider, hintObj, \"my-key\");\n                runs(function () {\n                    expect(testDoc.getRange(testPosStart, testPosEnd)).toEqual(\"[\\\"my-key\\\"]\");\n                });\n            });\n\n            it(\"should jump to definition inside html file\", function () {\n                var start = { line: 36, ch: 10 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 19, ch: 20});\n                });\n            });\n\n            it(\"should jump to funtion definition to loaded file1\", function () {\n                var start = { line: 22, ch: 15 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 33, ch: 13});\n                });\n            });\n\n            it(\"should jump to funtion definition to loaded file2\", function () {\n                var start = { line: 23, ch: 15 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 6, ch: 13});\n                });\n            });\n\n            it(\"should jump to property definition to loaded file1\", function () {\n                var start = { line: 23, ch: 28 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 4, ch: 16});\n                });\n            });\n\n            it(\"should jump to property definition to loaded file2\", function () {\n                var start = { line: 23, ch: 18 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 3, ch: 6});\n                });\n            });\n\n\n        });\n\n        describe(\"JavaScript Code Hinting without modules\", function () {\n            var testPath = extensionPath + \"/unittest-files/non-module-test-files/app.js\";\n            ScopeManager.handleProjectOpen(extensionPath + \"/unittest-files/non-module-test-files/\");\n\n            beforeEach(function () {\n                setupTest(testPath, true);\n            });\n\n            afterEach(function () {\n                tearDownTest();\n            });\n\n            // Test reading multiple files and subdirectories\n            // Turned for per #7646\n            xit(\"should handle reading all files when modules not used\", function () {\n                var start = { line: 8, ch: 8 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"a\", \"b\", \"b1\", \"c\", \"d\"]);\n                });\n            });\n        });\n\n        describe(\"JavaScript Code Hinting with modules\", function () {\n            var testPath = extensionPath + \"/unittest-files/module-test-files/module_tests.js\";\n\n            beforeEach(function () {\n                setupTest(testPath, true);\n            });\n\n            afterEach(function () {\n                tearDownTest();\n            });\n\n            it(\"should read methods created in submodule on this\", function () {\n                var start = { line: 8, ch: 17 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"addMessage\", \"name\", \"privilegedMethod\", \"publicMethod1\"]);\n                });\n            });\n\n            // bug: wait for fix in tern\n            xit(\"should read methods created in submodule\", function () {\n                var start = { line: 19, ch: 15 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"addMessage\", \"name\", \"privilegedMethod\", \"publicMethod1\"]);\n                });\n            });\n\n            it(\"should read properties created in parent module\", function () {\n                var start        = { line: 30, ch: 8 },\n                    testPos          = { line: 30, ch: 15};\n\n                testDoc.replaceRange(\"parent.\", start);\n                runs(function () {\n                    testEditor.setCursorPos(testPos);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"addMessage\", \"name\", \"privilegedMethod\", \"publicMethod1\"]);\n                });\n            });\n\n            // bug: wait for tern\n            xit(\"should read methods created in submodule module\", function () {\n                var start        = { line: 62, ch: 0 },\n                    testPos          = { line: 62, ch: 13};\n\n                testDoc.replaceRange(\"SearchEngine.\", start);\n                runs(function () {\n                    testEditor.setCursorPos(testPos);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"getYourLuckyNumber\", \"subSearch\"]);\n                });\n            });\n\n            it(\"should read methods created in parent module\", function () {\n                var start        = { line: 78, ch: 41 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"getYourLuckyNumber\", \"subSearch\"]);\n                });\n            });\n\n            it(\"should load module by file path from require\", function () {\n                var start        = { line: 88, ch: 20 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"color\", \"material\", \"size\"]);\n                });\n            });\n\n            // tern bug: https://github.com/marijnh/tern/issues/147\n            xit(\"should read properties from exported module\", function () {\n                var start        = { line: 96, ch: 0 },\n                    testPos          = { line: 96, ch: 9};\n\n                testDoc.replaceRange(\"hondaCar.\", start);\n                runs(function () {\n                    testEditor.setCursorPos(testPos);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"model\", \"name\"]);\n                });\n            });\n\n            // bug in test framework? can't run sequential jump, verification is wrong\n            xit(\"should jump to a module, depending module\", function () {\n                var start        = { line: 93, ch: 25 },\n                    testPos      = { line: 8, ch: 35 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 5, ch: 23});\n                });\n                testEditor.setCursorPos(testPos);\n                runs(function () {\n                    editorJumped({line: 5, ch: 23});\n                });\n            });\n        });\n\n        describe(\"JavaScript Code Hinting preference tests\", function () {\n            var testPath = extensionPath + \"/unittest-files/preference-test-files/\",\n                preferences;\n\n            function getPreferences(path) {\n                preferences = null;\n\n                FileSystem.resolve(path, function (err, file) {\n                    if (!err) {\n                        FileUtils.readAsText(file).done(function (text) {\n                            var configObj = null;\n                            try {\n                                configObj = JSON.parse(text);\n                            } catch (e) {\n                                // continue with null configObj\n                                console.log(e);\n                            }\n                            preferences = new Preferences(configObj);\n                        }).fail(function (error) {\n                            preferences = new Preferences();\n                        });\n                    } else {\n                        preferences = new Preferences();\n                    }\n                });\n            }\n\n            // Test preferences file with no entries. Preferences should contain\n            // default values.\n            it(\"should handle reading an empty configuration file\", function () {\n                getPreferences(testPath + \"defaults-test/.jscodehints\");\n                waitsFor(function () {\n                    return preferences !== null;\n                });\n\n                runs(function () {\n                    expect(preferences.getExcludedDirectories()).toEqual(/node_modules/);\n                    expect(preferences.getExcludedFiles().source).\n                        toBe(/^require.*\\.js$|^jquery.*\\.js$/.source);\n                    expect(preferences.getMaxFileCount()).toBe(100);\n                    expect(preferences.getMaxFileSize()).toBe(512 * 1024);\n                });\n            });\n\n            // Test preferences file with empty or out of ranges values. Preferences\n            // should contain default values.\n            it(\"should handle reading an invalid configuration file\", function () {\n                getPreferences(testPath + \"negative-test/.jscodehints\");\n                waitsFor(function () {\n                    return preferences !== null;\n                });\n\n                runs(function () {\n                    expect(preferences.getExcludedDirectories()).toEqual(/node_modules/);\n                    expect(preferences.getExcludedFiles().source).\n                        toBe(/^require.*\\.js$|^jquery.*\\.js$/.source);\n                    expect(preferences.getMaxFileCount()).toBe(100);\n                    expect(preferences.getMaxFileSize()).toBe(512 * 1024);\n                });\n            });\n\n            // Positive test. Test pattern matching.\n            it(\"should handle a valid configuration file\", function () {\n                getPreferences(testPath + \"positive-test/.jscodehints\");\n                waitsFor(function () {\n                    return preferences !== null;\n                });\n\n                runs(function () {\n                    var excludedDirs = preferences.getExcludedDirectories(),\n                        excludedFiles = preferences.getExcludedFiles();\n\n                    // test \"excluded-dir1\"\n                    expect(excludedDirs.test(\"excluded-dir1\")).toBeTruthy();\n                    expect(excludedDirs.test(\"xexcluded-dir1\")).toBeFalsy();\n\n                    // test \"excluded-dir2-*\"\n                    expect(excludedDirs.test(\"excluded-dir2-1\")).toBeTruthy();\n                    expect(excludedDirs.test(\"excluded-dir2-12\")).toBeFalsy();\n                    expect(excludedDirs.test(\"excluded-dir2-z\")).toBeFalsy();\n                    expect(excludedDirs.test(\"excluded-dir2-\")).toBeFalsy();\n                    expect(excludedDirs.test(\"xexcluded-dir2-1\")).toBeFalsy();\n\n                    // test \"file1?.js\"\n                    expect(excludedFiles.test(\"file1.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"file12.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"file123.js\")).toBeFalsy();\n\n                    // test \"file2*.js\"\n                    expect(excludedFiles.test(\"file2.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"file2xxx.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"filexxxx.js\")).toBeFalsy();\n\n                    // test \"file3.js\"\n                    expect(excludedFiles.test(\"file3.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"xfile3.js\")).toBeFalsy();\n\n                    // test \"/file4[x|y|z]?.js/\"\n                    expect(excludedFiles.test(\"file4.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"file4x.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"file4y.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"file4z.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"file4b.js\")).toBeFalsy();\n                    expect(excludedFiles.test(\"file4xyz.js\")).toBeFalsy();\n                    expect(excludedFiles.test(\"xfile4.js\")).toBeTruthy();\n\n                    // test builtin exclusions are also present\n                    expect(excludedFiles.test(\"require.js\")).toBeTruthy();\n                    expect(excludedFiles.test(\"jquery.js\")).toBeTruthy();\n\n                    expect(preferences.getMaxFileCount()).toBe(512);\n                    expect(preferences.getMaxFileSize()).toBe(100000);\n                });\n            });\n        });\n\n        describe(\"regression tests\", function () {\n\n            it(\"should return true for valid identifier, false for invalid one\", function () {\n                var identifierList = [\"\", \"\", \"\", \"\",\n                                      \"KingGeorge\", \"\", \"_\",\n                                      \"price_99_89\", \"$_3423\", \"TRUE\", \"FALSE\", \"IV\"];\n                var invalidIdentifierList = [\" break\", \"\\tif\", \"\\ntrade\"];\n\n                invalidIdentifierList.forEach(function (element) {\n                    var result = HintUtils.maybeIdentifier(element);\n                    expect(result).toBe(false);\n                });\n\n                identifierList.forEach(function (element) {\n                    var result = HintUtils.maybeIdentifier(element);\n                    expect(result).toBe(true);\n                });\n            });\n        });\n\n        describe(\"JavaScript Code Hinting with test.html file\", function () {\n            var testFile = extensionPath + \"/unittest-files/basic-test-files/test.html\";\n\n            beforeEach(function () {\n                setupTest(testFile, true);\n            });\n\n            afterEach(function () {\n                tearDownTest();\n\n            });\n\n            // FIXME (issue #3915)\n            xit(\"should read function name has double byte chars\", function () {\n                var start   = { line: 15, ch: 8 },\n                    testPos = { line: 15, ch: 10 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"fun\"]);\n                });\n                runs(function () {\n                    testEditor.setCursorPos(testPos);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"fun()\"]);\n                });\n            });\n\n            it(\"should jump to function name with double byte chars\", function () {\n                var start        = { line: 16, ch: 9 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 12, ch: 20});\n                });\n            });\n\n            // FIXME (issue #3915)\n            xit(\"should read function name has non ascii chars\", function () {\n                var start = { line: 16, ch: 16 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"frenchProp()\"]);\n                });\n            });\n\n            it(\"should jump to function name with non ascii chars\", function () {\n                var start        = { line: 16, ch: 12 };\n\n                testEditor.setCursorPos(start);\n                runs(function () {\n                    editorJumped({line: 12, ch: 20});\n                });\n            });\n        });\n\n        describe(\"Code Hinting Regression\", function () {\n            var testFile = extensionPath + \"/unittest-files/module-test-files/china/cupFiller.js\";\n\n            beforeEach(function () {\n                setupTest(testFile, true);\n            });\n\n            afterEach(function () {\n                tearDownTest();\n            });\n\n            // The test is disabled, because the TernWorker will consult the ProjectManager to\n            // determine all the files in the project root. We don't have a project root for this\n            // testcase. Perhaps we need to change the testsetup or find another way of dealing with this\n            // Test makes sure that http://github.com/adobe/brackets/issue/6931 doesn't show up\n            xit(\"should show hints for members of referenced class\", function () {\n                var start = { line: 8, ch: 15 };\n\n                runs(function () {\n                    testEditor.setCursorPos(start);\n                    var hintObj = expectHints(JSCodeHints.jsHintProvider);\n                    hintsPresentExact(hintObj, [\"empty\", \"emptyIt\", \"fill\", \"full\"]);\n                });\n            });\n        });\n\n        describe(\"JavaScript Code Hinting format parameters tests\", function () {\n\n            it(\"should format parameters with no params\", function () {\n                var params = [];\n\n                expect(HintUtils2.formatParameterHint(params)).toBe(\"\");\n            });\n\n            it(\"should format parameters with one param\", function () {\n                var params = [{name: \"param1\", type: \"String\"}];\n\n                expect(HintUtils2.formatParameterHint(params)).toBe(\"String param1\");\n            });\n\n            it(\"should format parameters with one optional param\", function () {\n                var params = [{name: \"param1\", type: \"String\", isOptional: true}];\n\n                expect(HintUtils2.formatParameterHint(params)).toBe(\"[String param1]\");\n            });\n\n            it(\"should format parameters with one required, one optional param\", function () {\n                var params = [{name: \"param1\", type: \"String\"},\n                              {name: \"param2\", type: \"String\", isOptional: true}];\n\n                expect(HintUtils2.formatParameterHint(params)).toBe(\"String param1, [String param2]\");\n            });\n\n            it(\"should format parameters with required param following an optional param\", function () {\n                var params = [{name: \"param1\", type: \"String\"},\n                    {name: \"param2\", type: \"String\", isOptional: true},\n                    {name: \"param3\", type: \"String\"}];\n\n                expect(HintUtils2.formatParameterHint(params)).toBe(\"String param1, [String param2, String param3]\");\n            });\n\n            it(\"should format parameters with optional param following an optional param\", function () {\n                var params = [{name: \"param1\", type: \"String\"},\n                    {name: \"param2\", type: \"String\", isOptional: true},\n                    {name: \"param3\", type: \"String\", isOptional: true}];\n\n                expect(HintUtils2.formatParameterHint(params)).toBe(\"String param1, [String param2], [String param3]\");\n            });\n\n            it(\"should format parameters with optional param following optional and required params\", function () {\n                var params = [{name: \"param1\", type: \"String\"},\n                    {name: \"param2\", type: \"String\", isOptional: true},\n                    {name: \"param3\", type: \"String\"},\n                    {name: \"param4\", type: \"String\", isOptional: true}];\n\n                expect(HintUtils2.formatParameterHint(params)).toBe(\"String param1, [String param2, String param3], [String param4]\");\n            });\n\n        });\n    });\n});\n"],"file":"unittestsx.js"}