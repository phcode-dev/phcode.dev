function _createRecentProjectCard(fullPath,displayLocation,nodeId,tabIndex){let removeBtnDisableStyle="",recentProjectListWidth;path.normalize(fullPath)===path.normalize(newProjectExtension.getWelcomeProjectPath())&&(removeBtnDisableStyle="display: none;");const fontWidth=6,charsToFillFontWidth=document.getElementById("recentProjectList").clientWidth/6,title=displayLocation.length<charsToFillFontWidth?"":displayLocation;return $(`<li onclick="openProject('${fullPath}');_recentProjectMetric('open');" style="overflow: hidden" title="${title}">\n        <a id="${nodeId}" href="#" \n        class="d-flex align-items-center justify-content-between tabable"\n        tabindex="${tabIndex}">\n            <div class="project-name">\n                ${newProjectExtension.path.basename(fullPath)}\n            </div>\n            <button class="remove-btn recent-project-remove" onclick="removeProject('${fullPath}');_recentProjectMetric('remove');"\n            style="${removeBtnDisableStyle};" title="${Strings.REMOVE_FROM_RECENT_PROJECTS}">\n                <i class="fa-solid fa-xmark"></i>\n            </button>\n        </a>\n        <div style="overflow: hidden;">\n            <p class="recent-project-metadata">${displayLocation}</p>\n        </div>\n    </li>`)}function _recentProjectMetric(type){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"recentProject.btnClick",type)}function getDisplayLocation(projectPath){const tauriDir=newProjectExtension.getTauriDir();return projectPath.startsWith(tauriDir)?newProjectExtension.getTauriPlatformPath(projectPath):projectPath.startsWith(newProjectExtension.getMountDir())?"":Strings.PROJECT_FROM_BROWSER}const imageHTML='<img src="images/youtube_video.webp" alt="Phoenix Code on YouTube"\n    title="Phoenix Code on YouTube"\n    style="cursor: pointer; width: 100%; height: 100%"\n    onclick="window.parent.brackets.app.openURLInDefaultBrowser(\'https://www.youtube.com/watch?v=vtks0cus0hA\')"/>';function _updateProjectCards(){let recentProjectList=$(document.getElementById("recentProjectList"));recentProjectList.empty();let recentProjects=recentProjectExtension.getRecentProjects(),tabIndex=1,defaultProjects=[newProjectExtension.getWelcomeProjectPath(),newProjectExtension.getExploreProjectPath()],omitProjectsInListing=[newProjectExtension.getExploreProjectPath()],showRecentProjects=!1;for(let recentProject of recentProjects)recentProject.endsWith("/")||(recentProject=`${recentProject}/`),defaultProjects.includes(recentProject)||(showRecentProjects=!0),omitProjectsInListing.includes(recentProject)||recentProjectList.append(_createRecentProjectCard(recentProject,getDisplayLocation(recentProject),`recent-prj-list-${tabIndex}`,tabIndex++));showRecentProjects||($("#recentProjectsContainer").addClass("forced-hidden"),$("#noProjectContainer").removeClass("forced-hidden"),document.getElementById("YTVideoFrame").innerHTML=imageHTML)}function openProject(fullPath){recentProjectExtension.openProjectWithPath(fullPath).then(()=>{newProjectExtension.closeDialogue()}).catch(()=>{_updateProjectCards()})}function removeProject(fullPath){recentProjectExtension.removeFromRecentProject(fullPath),_updateProjectCards(),event.stopPropagation()}function _showFirstTimeExperience(){let shownBefore;PhStore.getItem("notification.defaultProject.Shown")||(createNotificationFromTemplate(Strings.DEFAULT_PROJECT_NOTIFICATION,"defaultProjectButton",{allowedPlacements:["left","right"],autoCloseTimeS:600,dismissOnClick:!0}),PhStore.setItem("notification.defaultProject.Shown","true"))}function _updateDropdown(){let shouldShowWelcome=PhStore.getItem("new-project.showWelcomeScreen")||"Y";document.getElementById("showWelcomeIndicator").style="Y"===shouldShowWelcome?"visibility: visible":"visibility: hidden"}function _attachSettingBtnEventListeners(){document.querySelector(".dropdown").addEventListener("click",function(){let content=this.querySelector(".dropdown-content"),dropbtn=this.querySelector(".dropbtn");_updateDropdown(),"block"===content.style.display?(content.style.display="none",dropbtn.classList.remove("dropbtnActive")):(content.style.display="block",dropbtn.classList.add("dropbtnActive"))}),document.getElementById("showWelcome").addEventListener("click",event=>{let shouldShowWelcome=PhStore.getItem("new-project.showWelcomeScreen")||"Y";shouldShowWelcome="Y"===shouldShowWelcome?"N":"Y",PhStore.setItem("new-project.showWelcomeScreen",shouldShowWelcome)}),document.getElementById("showAbout").addEventListener("click",event=>{newProjectExtension.showAboutBox()}),document.addEventListener("click",function(event){let dropdown=document.querySelector(".dropdown"),content=dropdown.querySelector(".dropdown-content"),dropbtn=dropdown.querySelector(".dropbtn");dropdown.contains(event.target)||(content.style.display="none",dropbtn.classList.remove("dropbtnActive"))})}function _openURLInTauri(url){window.top.__TAURI__&&window.top.Phoenix.app.openURLInDefaultBrowser(url)}function _updateProBranding(){try{const $freeTitle=$(".phoenix-free-title"),$proTitle=$("#phoenix-pro-title"),$proTitleSpan=$(".pro-plan-name");if(!$freeTitle.length||!$proTitle.length||!$proTitleSpan.length)return void console.warn("Pro branding elements not found");const planInfo=window.top.Phoenix&&window.top.Phoenix.pro&&window.top.Phoenix.pro.plan;planInfo&&planInfo.isSubscriber?($freeTitle.addClass("forced-hidden"),$proTitle.removeClass("forced-hidden"),$proTitleSpan.text(planInfo.name||"Phoenix Pro")):($freeTitle.removeClass("forced-hidden"),$proTitle.addClass("forced-hidden"))}catch(error){console.error("Error updating pro branding:",error)}}function initCodeEditor(){document.getElementById("openFolderBtn").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","open-folder"),newProjectExtension.openFolder()},document.getElementById("viewMore").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","viewMore"),window.location.href="new-project-more.html"},document.getElementById("phoenix-pro-title").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","proTitle"),_openURLInTauri("https://account.phcode.dev")},document.getElementById("githubStarsButton").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","githubStars"),_openURLInTauri("https://github.com/phcode-dev/phoenix")},document.getElementById("sponsorIcon").title=Strings.SUPPORT_US_OPEN_COLLECTIVE;const icons=["githubIcon","twitterIcon","youtubeIcon","sponsorIcon"];for(let iconID of icons)document.getElementById(iconID).onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click",iconID),_openURLInTauri(document.getElementById(iconID).getAttribute("href"))};document.getElementById("newGitHubProject").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","github-project"),window.location.href="new-project-github.html"},document.getElementById("exploreBtn").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","games"),newProjectExtension.setupExploreProject().then(()=>{openProject(newProjectExtension.getExploreProjectPath())}).catch(console.error)},document.getElementById("defaultProjectButton").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","default-project"),newProjectExtension.setupStartupProject().then(()=>{openProject(newProjectExtension.getWelcomeProjectPath())}).catch(console.error)};const banner=document.getElementById("download-phcode-banner");banner.onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"getApp.Click",window.top.Phoenix.platform),window.top.Phoenix.app.openURLInDefaultBrowser("https://phcode.io")},window.top.Phoenix.isNativeApp||window.top.Phoenix.browser.isChromeOS||!window.top.Phoenix.browser.isDeskTop||(banner.classList.remove("forced-hidden"),document.getElementById("project-items-container").classList.add("even-layout"),document.getElementById("download-string").textContent=Strings.DOWNLOAD_DESKTOP_APP,"win"===window.top.Phoenix.platform?document.getElementById("windows-logo").classList.remove("forced-hidden"):"mac"===window.top.Phoenix.platform?(document.getElementById("mac-logo").classList.remove("forced-hidden"),document.getElementById("download-string").textContent=Strings.GET_DESKTOP_APP):document.getElementById("linux-logo").classList.remove("forced-hidden")),document.getElementById("newHTMLBtn").onclick=function(){Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"main.Click","html5"),newProjectFromURLScreen(getPhoenixAbsURL("assets/sample-projects/HTML5.zip"),"html project",Strings.NEW_HTML,{previewURL:`${getPhoenixAbsURL("assets/sample-projects/HTML5/index.html")}`})},_updateProjectCards(),_showFirstTimeExperience(),$("body").append($('<script async defer src="https://buttons.github.io/buttons.js"><\/script>')),_attachSettingBtnEventListeners(),_updateProBranding()}
//# sourceMappingURL=code-editor.js.map
