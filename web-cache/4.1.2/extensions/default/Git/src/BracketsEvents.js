define(function(require,exports,module){const _=brackets.getModule("thirdparty/lodash"),DocumentManager=brackets.getModule("document/DocumentManager"),FileSystem=brackets.getModule("filesystem/FileSystem"),ProjectManager=brackets.getModule("project/ProjectManager"),MainViewManager=brackets.getModule("view/MainViewManager"),Events=require("src/Events"),EventEmitter=require("src/EventEmitter"),HistoryViewer=require("src/HistoryViewer"),Preferences=require("src/Preferences"),Utils=require("src/Utils"),watchedInsideGit=["HEAD"],GIT_EVENTS="gitEvents";function disableAll(){FileSystem.off(`change.${GIT_EVENTS}`),DocumentManager.off(`documentSaved.${GIT_EVENTS}`),MainViewManager.off(`currentFileChange.${GIT_EVENTS}`),ProjectManager.off(`projectOpen.${GIT_EVENTS}`),ProjectManager.off(`projectRefresh.${GIT_EVENTS}`),ProjectManager.off(`beforeProjectClose.${GIT_EVENTS}`)}FileSystem.on(`change.${GIT_EVENTS}`,function(evt,file){var currentGitRoot=Preferences.get("currentGitRoot");if(file&&0===file.fullPath.indexOf(currentGitRoot)){var whitelisted;if(0===file.fullPath.indexOf(currentGitRoot+".git/"))if(!_.any(watchedInsideGit,function(entry){return file.fullPath===currentGitRoot+".git/"+entry}))return void Utils.consoleDebug("Ignored FileSystem.change event: "+file.fullPath);EventEmitter.emit(Events.BRACKETS_FILE_CHANGED,file)}}),DocumentManager.on(`documentSaved.${GIT_EVENTS}`,function(evt,doc){0===doc.file.fullPath.indexOf(Preferences.get("currentGitRoot"))&&EventEmitter.emit(Events.BRACKETS_DOCUMENT_SAVED,doc)}),MainViewManager.on(`currentFileChange.${GIT_EVENTS}`,function(evt,currentDocument,previousDocument){currentDocument=currentDocument||DocumentManager.getCurrentDocument(),HistoryViewer.isVisible()?HistoryViewer.hide():EventEmitter.emit(Events.BRACKETS_CURRENT_DOCUMENT_CHANGE,currentDocument,previousDocument)}),ProjectManager.on(`projectOpen.${GIT_EVENTS}`,function(){EventEmitter.emit(Events.BRACKETS_PROJECT_CHANGE)}),ProjectManager.on(`projectRefresh.${GIT_EVENTS}`,function(){EventEmitter.emit(Events.BRACKETS_PROJECT_REFRESH)}),ProjectManager.on(`beforeProjectClose.${GIT_EVENTS}`,function(){EventEmitter.emit(Events.GIT_DISABLED)}),exports.disableAll=disableAll});
//# sourceMappingURL=BracketsEvents.js.map
