{"version":3,"sources":["extensions/default/Git/src/dialogs/Push.js"],"names":["define","require","exports","Dialogs","brackets","getModule","Mustache","RemoteCommon","Strings","template","remotesTemplate","_attachEvents","$dialog","pushConfig","attachCommonEvents","find","filter","prop","_show","resolve","reject","templateArgs","config","mode","modeLabel","PUSH_TO","compiledTemplate","render","remotes","dialog","showModalDialogUsingTemplate","getElement","done","buttonId","collectValues","show","Promise","push","collectInfo","then"],"mappings":"AAAAA,OAAO,SAAUC,QAASC,SAGtB,MAAMC,QAAUC,SAASC,UAAU,mBAC/BC,SAAWF,SAASC,UAAU,gCAG5BE,aAAkBN,QAAQ,4BAC5BO,QAAoBJ,SAASC,UAAU,WAGrCI,SAAsBR,QAAQ,+CAChCS,gBAAsBT,QAAQ,oDAGlC,SAASU,cAAcC,QAASC,YAC5BN,aAAaO,mBAAmBD,WAAYD,SAG5CA,QACKG,KAAK,0BACLC,OAAO,qBACPC,KAAK,WAAW,GAGzB,SAASC,MAAML,WAAYM,QAASC,QAChC,MAAMC,aAAe,CACjBC,OAAQT,WACRU,KAAM,UACNC,UAAWhB,QAAQiB,QACnBjB,QAASA,SAGPkB,iBAAmBpB,SAASqB,OAAOlB,SAAUY,aAAc,CACzDO,QAASlB,kBAEbmB,OAAS1B,QAAQ2B,6BAA6BJ,kBAC9Cd,QAAUiB,OAAOE,aAErBpB,cAAcC,QAASC,YAEvBgB,OAAOG,KAAK,SAAUC,UACD,OAAbA,UACA1B,aAAa2B,cAAcrB,WAAYD,SACvCO,QAAQN,aAERO,WAKZ,SAASe,KAAKtB,YACV,OAAO,IAAIuB,QAAQ,CAACjB,QAASC,UACzBP,WAAWwB,MAAO,EAElB9B,aAAa+B,YAAYzB,YAAY0B,KAAK,KACtCrB,MAAML,WAAYM,QAASC,YAKvClB,QAAQiC,KAAOA","sourcesContent":["define(function (require, exports) {\n\n    // Brackets modules\n    const Dialogs = brackets.getModule(\"widgets/Dialogs\"),\n        Mustache = brackets.getModule(\"thirdparty/mustache/mustache\");\n\n    // Local modules\n    const RemoteCommon    = require(\"src/dialogs/RemoteCommon\"),\n        Strings           = brackets.getModule(\"strings\");\n\n    // Templates\n    const template            = require(\"text!src/dialogs/templates/push-dialog.html\"),\n        remotesTemplate     = require(\"text!src/dialogs/templates/remotes-template.html\");\n\n    // Implementation\n    function _attachEvents($dialog, pushConfig) {\n        RemoteCommon.attachCommonEvents(pushConfig, $dialog);\n\n        // select default - we don't want to remember forced or delete branch as default\n        $dialog\n            .find(\"input[name='strategy']\")\n            .filter(\"[value='DEFAULT']\")\n            .prop(\"checked\", true);\n    }\n\n    function _show(pushConfig, resolve, reject) {\n        const templateArgs = {\n            config: pushConfig,\n            mode: \"PUSH_TO\",\n            modeLabel: Strings.PUSH_TO,\n            Strings: Strings\n        };\n\n        const compiledTemplate = Mustache.render(template, templateArgs, {\n                remotes: remotesTemplate\n            }),\n            dialog = Dialogs.showModalDialogUsingTemplate(compiledTemplate),\n            $dialog = dialog.getElement();\n\n        _attachEvents($dialog, pushConfig);\n\n        dialog.done(function (buttonId) {\n            if (buttonId === \"ok\") {\n                RemoteCommon.collectValues(pushConfig, $dialog);\n                resolve(pushConfig);\n            } else {\n                reject();\n            }\n        });\n    }\n\n    function show(pushConfig) {\n        return new Promise((resolve, reject) => {\n            pushConfig.push = true;\n            // collectInfo never rejects\n            RemoteCommon.collectInfo(pushConfig).then(()=>{\n                _show(pushConfig, resolve, reject);\n            });\n        });\n    }\n\n    exports.show = show;\n\n});\n"],"file":"Push.js"}