define(function(require,exports){const DocumentManager=brackets.getModule("document/DocumentManager"),Commands=brackets.getModule("command/Commands"),CommandManager=brackets.getModule("command/CommandManager"),Strings=brackets.getModule("strings"),MainViewManager=brackets.getModule("view/MainViewManager"),Events=require("src/Events"),EventEmitter=require("src/EventEmitter"),Git=require("src/git/Git"),Preferences=require("src/Preferences"),Constants=require("src/Constants"),Utils=require("src/Utils");let closeUnmodifiedCmd;function handleCloseNotModified(){Git.status().then(function(modifiedFiles){var openFiles=MainViewManager.getWorkingSet(MainViewManager.ALL_PANES),currentGitRoot=Preferences.get("currentGitRoot");openFiles.forEach(function(openFile){var removeOpenFile=!0;if(modifiedFiles.forEach(function(modifiedFile){currentGitRoot+modifiedFile.file===openFile.fullPath&&(removeOpenFile=!1)}),removeOpenFile){const doc=DocumentManager.getOpenDocumentForPath(openFile.fullPath);doc&&doc.isDirty||CommandManager.execute(Commands.FILE_CLOSE_LIST,{PaneId:MainViewManager.ALL_PANES,fileList:[openFile]})}}),MainViewManager.focusActivePane()})}function init(){closeUnmodifiedCmd=CommandManager.register(Strings.CMD_CLOSE_UNMODIFIED,Constants.CMD_GIT_CLOSE_UNMODIFIED,handleCloseNotModified),Utils.enableCommand(Constants.CMD_GIT_CLOSE_UNMODIFIED,!1)}EventEmitter.on(Events.GIT_ENABLED,function(){Utils.enableCommand(Constants.CMD_GIT_CLOSE_UNMODIFIED,!0)}),EventEmitter.on(Events.GIT_DISABLED,function(){Utils.enableCommand(Constants.CMD_GIT_CLOSE_UNMODIFIED,!1)}),exports.init=init});
//# sourceMappingURL=CloseNotModified.js.map
