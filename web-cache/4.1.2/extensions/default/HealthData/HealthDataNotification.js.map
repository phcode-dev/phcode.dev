{"version":3,"sources":["extensions/default/HealthData/HealthDataNotification.js"],"names":["define","require","exports","module","PreferencesManager","brackets","getModule","HealthDataPreview","HealthDataPopup","handleHealthDataStatistics","previewHealthData","_showFirstLaunchPopup","window","testEnvironment","alreadyShown","getViewState","prefs","getExtensionPrefs","get","showFirstLaunchTooltip","done","setViewState"],"mappings":"AAKAA,OAAO,SAAUC,QAASC,QAASC,QAE/B,MAAMC,mBAA+BC,SAASC,UAAU,kCACpDC,kBAA+BN,QAAQ,qBACvCO,gBAA+BP,QAAQ,mBAS3C,SAASQ,6BACLF,kBAAkBG,oBAGtB,SAASC,wBACL,IAAIC,OAAOC,gBAAgB,CACvB,MAAMC,aAAeV,mBAAmBW,aAAa,+BAC/CC,MAAQZ,mBAAmBa,kBAAkB,eAC9CH,cAAgBE,MAAME,IAAI,uBAC3BV,gBAAgBW,yBACXC,KAAK,WACFhB,mBAAmBiB,aAAa,+BAA+B,MAbnFV,wBAmBAT,QAAQO,2BAAmCA","sourcesContent":["// SPDX-License-Identifier: AGPL-3.0-only\n// Copyright (c) 2021 - present core.ai. All rights reserved.\n\n/*global*/\n\ndefine(function (require, exports, module) {\n\n    const PreferencesManager           = brackets.getModule(\"preferences/PreferencesManager\"),\n        HealthDataPreview            = require(\"HealthDataPreview\"),\n        HealthDataPopup              = require(\"HealthDataPopup\");\n\n    // Since we don't have any user accounts or trackable ID to uniquely identify a user on first launch,\n    // we should be ok GDPR wise to delay showing the health data popup. But it was found later to be annoying\n    // and a workflow distraction. So we show the health data popup almost immediately so that the user can\n    // close all the popups in on go.\n\n    _showFirstLaunchPopup();\n\n    function handleHealthDataStatistics() {\n        HealthDataPreview.previewHealthData();\n    }\n\n    function _showFirstLaunchPopup() {\n        if(!window.testEnvironment){\n            const alreadyShown = PreferencesManager.getViewState(\"healthDataNotificationShown\");\n            const prefs = PreferencesManager.getExtensionPrefs(\"healthData\");\n            if (!alreadyShown && prefs.get(\"healthDataTracking\")) {\n                HealthDataPopup.showFirstLaunchTooltip()\n                    .done(function () {\n                        PreferencesManager.setViewState(\"healthDataNotificationShown\", true);\n                    });\n            }\n        }\n    }\n\n    exports.handleHealthDataStatistics       = handleHealthDataStatistics;\n});\n"],"file":"HealthDataNotification.js"}