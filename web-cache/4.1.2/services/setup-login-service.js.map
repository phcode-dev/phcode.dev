{"version":3,"sources":["services/setup-login-service.js"],"names":["define","require","exports","module","EventDispatcher","KernalModeTrust","window","Error","secureExports","makeEventDispatcher","loginService"],"mappings":"AAyBAA,OAAO,SAAUC,QAASC,QAASC,QAC/B,MAAMC,gBAAkBH,QAAQ,yBAE1BI,gBAAkBC,OAAOD,gBAC/B,IAAIA,gBAEA,MAAM,IAAIE,MAAM,uFAIpB,MAAMC,cAAgB,GACtBJ,gBAAgBK,oBAAoBD,eAGpCH,gBAAgBK,aAAeF","sourcesContent":["/*\n * GNU AGPL-3.0 License\n *\n * Copyright (c) 2021 - present core.ai . All rights reserved.\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see https://opensource.org/licenses/AGPL-3.0.\n *\n */\n\n/**\n * Shared Login Service kernal mode trust setup\n *\n * This module contains shared login service functionality used by both\n * browser and desktop login implementations, including entitlements management.\n */\n\ndefine(function (require, exports, module) {\n    const EventDispatcher = require(\"utils/EventDispatcher\");\n\n    const KernalModeTrust = window.KernalModeTrust;\n    if(!KernalModeTrust){\n        // integrated extensions will have access to kernal mode, but not external extensions\n        throw new Error(\"Login service should have access to KernalModeTrust. Cannot boot without trust ring\");\n    }\n\n    // Create secure exports and set up KernalModeTrust.loginService\n    const secureExports = {};\n    EventDispatcher.makeEventDispatcher(secureExports);\n\n    // Set up loginService for both native and browser apps\n    KernalModeTrust.loginService = secureExports;\n\n    // no public exports to prevent extension tampering\n});\n"],"file":"setup-login-service.js"}