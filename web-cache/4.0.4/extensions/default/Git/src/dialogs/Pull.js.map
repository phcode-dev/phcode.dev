{"version":3,"sources":["extensions/default/Git/src/dialogs/Pull.js"],"names":["define","require","exports","Dialogs","brackets","getModule","Mustache","Preferences","RemoteCommon","Strings","template","remotesTemplate","_attachEvents","$dialog","pullConfig","attachCommonEvents","find","filter","get","prop","_show","resolve","reject","templateArgs","config","mode","modeLabel","PULL_FROM","compiledTemplate","render","remotes","dialog","showModalDialogUsingTemplate","getElement","done","buttonId","collectValues","set","strategy","show","Promise","pull","collectInfo","then"],"mappings":"AAAAA,OAAO,SAAUC,QAASC,SAGtB,MAAMC,QAAUC,SAASC,UAAU,mBAC/BC,SAAWF,SAASC,UAAU,gCAG5BE,YAAkBN,QAAQ,mBAC5BO,aAAkBP,QAAQ,4BAC1BQ,QAAkBL,SAASC,UAAU,WAGnCK,SAAsBT,QAAQ,+CAChCU,gBAAsBV,QAAQ,oDAGlC,SAASW,cAAcC,QAASC,YAC5BN,aAAaO,mBAAmBD,WAAYD,SAG5CA,QACKG,KAAK,0BACLC,OAAO,YAAcV,YAAYW,IAAI,kBAAoB,WAAa,MACtEC,KAAK,WAAW,GAGzB,SAASC,MAAMN,WAAYO,QAASC,QAChC,MAAMC,aAAe,CACjBC,OAAQV,WACRW,KAAM,YACNC,UAAWjB,QAAQkB,UACnBlB,QAASA,SAGPmB,iBAAmBtB,SAASuB,OAAOnB,SAAUa,aAAc,CACzDO,QAASnB,kBAEboB,OAAS5B,QAAQ6B,6BAA6BJ,kBAC9Cf,QAAUkB,OAAOE,aAErBrB,cAAcC,QAASC,YAEvBiB,OAAOG,KAAK,SAAUC,UACD,OAAbA,UACA3B,aAAa4B,cAActB,WAAYD,SACvCN,YAAY8B,IAAI,gBAAiBvB,WAAWwB,UAC5CjB,QAAQP,aAERQ,WAKZ,SAASiB,KAAKzB,YACV,OAAO,IAAI0B,QAAQ,CAACnB,QAASC,UACzBR,WAAW2B,MAAO,EAElBjC,aAAakC,YAAY5B,YAAY6B,KAAK,KACtCvB,MAAMN,WAAYO,QAASC,YAKvCpB,QAAQqC,KAAOA","sourcesContent":["define(function (require, exports) {\n\n    // Brackets modules\n    const Dialogs = brackets.getModule(\"widgets/Dialogs\"),\n        Mustache = brackets.getModule(\"thirdparty/mustache/mustache\");\n\n    // Local modules\n    const Preferences     = require(\"src/Preferences\"),\n        RemoteCommon    = require(\"src/dialogs/RemoteCommon\"),\n        Strings         = brackets.getModule(\"strings\");\n\n    // Templates\n    const template            = require(\"text!src/dialogs/templates/pull-dialog.html\"),\n        remotesTemplate     = require(\"text!src/dialogs/templates/remotes-template.html\");\n\n    // Implementation\n    function _attachEvents($dialog, pullConfig) {\n        RemoteCommon.attachCommonEvents(pullConfig, $dialog);\n\n        // load last used\n        $dialog\n            .find(\"input[name='strategy']\")\n            .filter(\"[value='\" + (Preferences.get(\"pull.strategy\") || \"DEFAULT\") + \"']\")\n            .prop(\"checked\", true);\n    }\n\n    function _show(pullConfig, resolve, reject) {\n        const templateArgs = {\n            config: pullConfig,\n            mode: \"PULL_FROM\",\n            modeLabel: Strings.PULL_FROM,\n            Strings: Strings\n        };\n\n        const compiledTemplate = Mustache.render(template, templateArgs, {\n                remotes: remotesTemplate\n            }),\n            dialog = Dialogs.showModalDialogUsingTemplate(compiledTemplate),\n            $dialog = dialog.getElement();\n\n        _attachEvents($dialog, pullConfig);\n\n        dialog.done(function (buttonId) {\n            if (buttonId === \"ok\") {\n                RemoteCommon.collectValues(pullConfig, $dialog);\n                Preferences.set(\"pull.strategy\", pullConfig.strategy);\n                resolve(pullConfig);\n            } else {\n                reject();\n            }\n        });\n    }\n\n    function show(pullConfig) {\n        return new Promise((resolve, reject) => {\n            pullConfig.pull = true;\n            // collectInfo never rejects\n            RemoteCommon.collectInfo(pullConfig).then(()=>{\n                _show(pullConfig, resolve, reject);\n            });\n        });\n    }\n\n    exports.show = show;\n\n});\n"],"file":"Pull.js"}