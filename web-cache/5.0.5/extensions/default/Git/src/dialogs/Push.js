define(function(require,exports){const Dialogs=brackets.getModule("widgets/Dialogs"),Mustache=brackets.getModule("thirdparty/mustache/mustache"),RemoteCommon=require("src/dialogs/RemoteCommon"),Strings=brackets.getModule("strings"),template=require("text!src/dialogs/templates/push-dialog.html"),remotesTemplate=require("text!src/dialogs/templates/remotes-template.html");function _attachEvents($dialog,pushConfig){RemoteCommon.attachCommonEvents(pushConfig,$dialog),$dialog.find("input[name='strategy']").filter("[value='DEFAULT']").prop("checked",!0)}function _show(pushConfig,resolve,reject){const templateArgs={config:pushConfig,mode:"PUSH_TO",modeLabel:Strings.PUSH_TO,Strings:Strings},compiledTemplate=Mustache.render(template,templateArgs,{remotes:remotesTemplate}),dialog=Dialogs.showModalDialogUsingTemplate(compiledTemplate),$dialog=dialog.getElement();_attachEvents($dialog,pushConfig),dialog.done(function(buttonId){"ok"===buttonId?(RemoteCommon.collectValues(pushConfig,$dialog),resolve(pushConfig)):reject()})}function show(pushConfig){return new Promise((resolve,reject)=>{pushConfig.push=!0,RemoteCommon.collectInfo(pushConfig).then(()=>{_show(pushConfig,resolve,reject)})})}exports.show=show});