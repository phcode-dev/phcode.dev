define(function(require,exports){const Dialogs=brackets.getModule("widgets/Dialogs"),Mustache=brackets.getModule("thirdparty/mustache/mustache"),RemoteCommon=require("src/dialogs/RemoteCommon"),Strings=brackets.getModule("strings"),template=require("text!src/dialogs/templates/clone-dialog.html");let $cloneInput;function _attachEvents($dialog){$cloneInput.on("keyup change",function(){var $authInputs=$dialog.find("input[name='username'],input[name='password'],input[name='saveToUrl']");if($(this).val().length>0)if(/^https?:/.test($(this).val())){$authInputs.prop("disabled",!1);var auth=/:\/\/([^:]+):?([^@]*)@/.exec($(this).val());auth&&($("input[name=username]",$dialog).val(auth[1]),$("input[name=password]",$dialog).val(auth[2]))}else $authInputs.prop("disabled",!0);else $authInputs.prop("disabled",!1)}),$cloneInput.focus()}function show(){return new Promise((resolve,reject)=>{const templateArgs={modeLabel:Strings.CLONE_REPOSITORY,Strings:Strings};var compiledTemplate=Mustache.render(template,templateArgs),dialog=Dialogs.showModalDialogUsingTemplate(compiledTemplate),$dialog=dialog.getElement();$cloneInput=$dialog.find("#git-clone-url"),_attachEvents($dialog),dialog.done(function(buttonId){if("ok"===buttonId){var cloneConfig={remote:"origin"};cloneConfig.remoteUrl=$cloneInput.val(),RemoteCommon.collectValues(cloneConfig,$dialog),resolve(cloneConfig)}else reject()})})}exports.show=show});