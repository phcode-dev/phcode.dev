function desktopInit(){const LAST_GIT_CLONE_BASE_DIR="PH_LAST_GIT_CLONE_BASE_DIR";let createProjectBtn,websiteURLInput,locationInput;function _validateGitURL(errors){let gitURL;return websiteURLInput.value?($(websiteURLInput).removeClass("error-border"),!0):($(websiteURLInput).addClass("error-border"),errors.push(`<span><i class="fas fa-exclamation-triangle" style="color: #f89406"></i>&nbsp;&nbsp;${Strings.ERROR_GIT_URL_INVALID}</span>`),!1)}function _validateProjectLocation(errors){let location;return locationInput.value===Strings.PLEASE_SELECT_A_FOLDER?($(locationInput).addClass("error-border"),!1):locationInput.error?(errors.push(`<span><i class="fas fa-exclamation-triangle" style="color: #f89406"></i>&nbsp;&nbsp;${locationInput.error}</span>`),$(locationInput).addClass("error-border"),!1):($(locationInput).removeClass("error-border"),!0)}function _validate(){const errors=[];let isValid=_validateGitURL(errors);isValid=_validateProjectLocation(errors)&&isValid,$(createProjectBtn).prop("disabled",!isValid);const $messageDisplay=$("#messageDisplay");return $messageDisplay.html(""),isValid||$messageDisplay.html(errors.join("<br>")),isValid}async function _deduceClonePath(newPath){if(newPath||(newPath=locationInput.originalPath),!newPath)return;const{clonePath:clonePath,error:error}=await newProjectExtension.getGitCloneDir(newPath,websiteURLInput.value);locationInput.clonePath=clonePath,locationInput.value=window.top.Phoenix.fs.getTauriPlatformPath(clonePath),locationInput.error=error,locationInput.originalPath=newPath}function _selectFolder(){newProjectExtension.showFolderSelect(locationInput.originalPath||"").then(newPath=>{_deduceClonePath(newPath).then(_validate)}).catch(err=>{console.error("user cancelled or error",err)})}function _createProjectClicked(){localStorage.setItem(LAST_GIT_CLONE_BASE_DIR,locationInput.originalPath),newProjectExtension.gitClone(websiteURLInput.value,locationInput.clonePath),Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"git.Click","create"),newProjectExtension.closeDialogue()}function initGitProject(){$(".label-clone").text(Strings.GIT_CLONE_URL),createProjectBtn=document.getElementById("createProjectBtn"),websiteURLInput=document.getElementById("websiteURLInput"),locationInput=document.getElementById("locationInput"),createProjectBtn.onclick=_createProjectClicked,$(websiteURLInput).keyup(()=>{_deduceClonePath().then(_validate)}),locationInput.value=Strings.PLEASE_SELECT_A_FOLDER,locationInput.onclick=_selectFolder,websiteURLInput.value="https://github.com/phcode-dev/HTML-Starter-Templates.git",_deduceClonePath(localStorage.getItem(LAST_GIT_CLONE_BASE_DIR)).then(_validate)}window.initGitProject=initGitProject}window.top.Phoenix.isNativeApp&&desktopInit();